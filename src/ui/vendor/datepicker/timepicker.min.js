var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var f=d++;return{value:b(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in d||(d[f]={});d=d[f]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
(function(a,b){"function"===typeof define&&define.amd?define([],function(){return a["Barge.TimePicker"]=b(a)}):"object"===typeof exports?module.exports=b(a):a["Barge.TimePicker"]=b(a)})(window,function(a){function b(c,a){this.initialized=!1;this.element=c?c:null;this.elements={};this.timepicker=null;this.time=new Date;this.settings={format:!0,meridian:!0,minTime:new Date((new Date).toDateString()+" 00:00"),maxTime:new Date((new Date).toDateString()+" 24:00"),onChange:!1,twentyFourHour:!0};this.active=
!1;this.init()}var d=Bee.Utils,e=Bee.Widget,f={};b.prototype.init=function(){this.element.length?console.warn("Timepicker selector must be for a specific element, not a list of elements."):(this.updateSettings(f),this.buildTimepicker())};b.prototype.updateSettings=function(c){c=c||{};for(var a=0;a<Object.keys(c).length;a++){var b=Object.keys(c)[a];Object.keys(c);this.settings[b]=c[Object.keys(c)[a]]}!this.settings.format&&d.defined(c.meridian)&&(this.settings.meridian=!1);this.settings.meridian=this.settings.format?
!0:this.settings.meridian;this.settings.minTime=void 0===this.settings.minTime.getDate&&null===this.settings.minTime.getDate?new Date((new Date).toDateString()+" "+this.settings.minTime):new Date((new Date).toDateString()+" 00:00");this.settings.maxTime=void 0===this.settings.maxTime.getDate&&null===this.settings.maxTime.getDate?new Date((new Date).toDateString()+" "+this.settings.maxTime):this.settings.maxTime;this.settings.maxTime.toString()===this.settings.minTime.toString()&&(c=new Date(this.settings.minTime),
c.setHours(c.getHours()+24),this.settings.maxTime=c);this.element.value&&(c=new Date((new Date).toDateString()+" "+this.element.value),this.time=isNaN(c.getTime())?this.time:c);this.time.setMilliseconds(0);Object.keys(this.elements).length&&(this.updateTime("minute",!0,0),this.render());this.validateTime()||(this.time=this.settings.minTime?this.settings.minTime:this.settings.maxTime)};b.prototype.buildTimepicker=function(){var c=e.createEl("div",{className:"timepickerwrapper"});c.setAttribute("id",
"tp_"+(Math.floor(100*Math.random())+1));var a=["hour","minute","meridian"];if(!Object.keys(this.elements).length)for(var b=0;b<a.length;b++){this.elements[a[b]]=document.createElement("div");this.elements[a[b]].className="timepicker"+a[b];var d=document.createElement("div");d.appendChild(document.createElement("div"));var f=document.createElement("p"),g=document.createElement("div");g.appendChild(document.createElement("div"));d.className="timepickerbutton timepickerbuttonup";f.className="display";
g.className="timepickerbutton timepickerbuttondown";this.settings.arrowColor&&(d.childNodes[0].style["border-bottom-color"]=this.settings.arrowColor,g.childNodes[0].style["border-top-color"]=this.settings.arrowColor);this.elements[a[b]].appendChild(d);this.elements[a[b]].appendChild(f);this.elements[a[b]].appendChild(g)}this.timepicker=c;this.element.parentNode.insertBefore(c,this.element.nextSibling);this.addListeners();this.render()};b.prototype.render=function(){var c=this.cleanWrapper(this.timepicker);
this.settings.meridian&&(c.className=0<=c.className.indexOf(" timepickerwrapper-full")?c.className:c.className+" timepickerwrapper-full");for(var a=0;a<Object.keys(this.elements).length;a++){var b=Object.keys(this.elements)[a],d=this.elements[b];b="get"+b.charAt(0).toUpperCase()+b.slice(1);d.querySelector(".display").innerText=this[b]();("meridian"!==Object.keys(this.elements)[a]||this.settings.meridian)&&c.appendChild(d)}this.timepicker=c;this.updateInput()};b.prototype.cleanWrapper=function(c){for(;c.hasChildNodes();)c.removeChild(c.lastChild);
return c};b.prototype.handleClick=function(c,a){a=a?c:c.currentTarget;c=a.parentNode.className.replace("timepicker","");a=-1!==a.className.indexOf("up")?!0:!1;this.updateTime(c,a)};b.prototype.validateInput=function(c){c=c.currentTarget.value;(c=c.length?new Date((new Date).toDateString()+" "+c):!1)&&!isNaN(c.getTime())&&(this.time=c);if(!this.validateTime()){var a=c.getTime()>this.settings.maxTime.getTime();c=a?new Date(this.settings.maxTime):new Date(this.settings.minTime);a?c.setMinutes(c.getMinutes()-
1):c.setMinutes(c.getMinutes()+1);this.time=c}this.render()};b.prototype.updateTime=function(c,a,b){b=b||1;switch(c){case "meridian":12<this.time.getHours()?this.time.setHours(this.time.getHours()-12):this.time.setHours(this.time.getHours()+12);break;default:a?this.add(c,b):this.subtract(c,b)}this.validateTime()||(c=a?new Date(this.settings.minTime):new Date(this.settings.maxTime),a?c.setMinutes(c.getMinutes()+1):c.setMinutes(c.getMinutes()-1),this.time=c);this.render()};b.prototype.add=function(a,
b){b=b||1;switch(a){case "minute":this.time.setMinutes(this.time.getMinutes()+b);break;case "hour":this.time.setHours(this.time.getHours()+b)}};b.prototype.subtract=function(a,b){b=b||1;switch(a){case "minute":this.time.setMinutes(this.time.getMinutes()-b);break;case "hour":this.time.setHours(this.time.getHours()-b)}};b.prototype.validateTime=function(){return this.settings.minTime?(this.time.setDate((new Date).getDate()),this.time.getTime()<this.settings.maxTime.getTime()&&this.time.getTime()>this.settings.minTime.getTime()):
!0};b.prototype.updateInput=function(a){this.initialized&&(this.element.value=this.buildString())};b.prototype.buildString=function(){return(this.getHour()+":"+this.getMinute()+" "+this.getMeridian()).trim()};b.prototype.toggleActive=function(a){a.target===this.element?(this.initialized||(this.initialized=!0,this.updateInput()),this.updateBounds(this.timepicker,a.target),this.active=!0):-1===a.target.className.indexOf("timepicker")&&-1===a.target.parentElement.className.indexOf("timepicker")&&(this.active=
!1);this.timepicker.className=this.active?0<=this.timepicker.className.indexOf(" timepickerwrapper-active")?this.timepicker.className:this.timepicker.className+" timepickerwrapper-active":this.timepicker.className.replace(" timepickerwrapper-active","")};b.prototype.updateBounds=function(){var a=this.element.getBoundingClientRect();this.timepicker.style.top=this.element.offsetTop+this.element.innerHeight+"px";this.timepicker.style.width=a.width+"px"};b.prototype.addListeners=function(){for(var b=
Object.keys(this.elements),d=this,e=0;e<b.length;e++)for(var f=[].slice.call(this.elements[b[e]].childNodes).filter(function(a){return-1!==a.className.indexOf("button")}),h={},g=0;g<f.length;h={timer:h.timer},g++){var k=f[g];k.addEventListener("click",this.handleClick.bind(this));h.timer=void 0;k.addEventListener("mousedown",function(b){return function(c){var e=this;b.timer=a.setInterval(function(){d.handleClick(e,!0)},300)}}(h));a.addEventListener("mouseup",function(a){return function(b){clearInterval(a.timer)}}(h))}this.element.addEventListener("change",
this.validateInput.bind(this));document.body.addEventListener("click",this.toggleActive.bind(this));a.addEventListener("resize",this.updateBounds.bind(this))};b.prototype.getTime=function(){return this.time};b.prototype.getHour=function(){return this.settings.format?!0===this.settings.twentyFourHour?this.time.getHours():12<this.time.getHours()?this.time.getHours()%12:0===this.time.getHours()?12:this.time.getHours():10>this.time.getHours()?"0"+this.time.getHours():this.time.getHours()};b.prototype.getMinute=
function(){var a=this.time.getMinutes();return 10>a?"0"+a:a};b.prototype.getMeridian=function(){return this.settings.meridian?12<=this.time.getHours()?"pm":"am":""};return Bee.TimePicker=b});
