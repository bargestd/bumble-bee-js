(function(){beforeEach(function(){this.timetable=new Timetable});describe("Timetable",function(){it("should by default set its scope from 9 to 17 hours",function(){expect(this.timetable.scope).to.deep.equal({hourStart:9,hourEnd:17})});it("should allow to set its scope in hours with maximum 24 hours span",function(){var a=this.timetable;expect(a.setScope(1,20).scope).to.deep.equal({hourStart:1,hourEnd:20});expect(a.setScope(0,0).scope).to.deep.equal({hourStart:0,hourEnd:0});expect(function(){a.setScope(1,
24)}).to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23");expect(function(){a.setScope(-1,1)}).to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23");expect(function(){a.setScope(1,0)}).not.to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23");expect(function(){a.setScope(3,1)}).not.to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23");
expect(function(){a.setScope(20)}).to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23");expect(function(){a.setScope(void 0)}).to.throw(RangeError,"Timetable scope should consist of (start, end) in whole hours from 0 to 23")});it("should allow to add a list of locations",function(){var a=this.timetable;expect(a.addLocations(["loc1","loc2"]).locations).to.deep.equal(["loc1","loc2"]);expect(a.addLocations(["loc3"]).locations).to.deep.equal(["loc1","loc2",
"loc3"]);expect(function(){a.addLocations(["loc3"])}).to.throw("Location already exists");expect(function(){a.addLocations(void 0)}).to.throw("Tried to add locations in wrong format");expect(function(){a.addLocations({})}).to.throw("Tried to add locations in wrong format")});it("should be possible to add events for an existing location using js dates",function(){var a=this.timetable;a.addLocations(["loc1","loc2","loc5"]);var b={url:"#"};expect(a.addEvent("Zumba","loc2",new Date(2015,7,17,9),new Date(2015,
7,17,17),b).events[0]).to.deep.equal({name:"Zumba",location:"loc2",startDate:new Date(2015,7,17,9),endDate:new Date(2015,7,17,17),options:{url:"#"}});expect(a.addEvent("Private concert","loc1",new Date(2015,7,17,9),new Date(2015,7,17,17),{class:"vip-only"}).events[1]).to.deep.equal({name:"Private concert",location:"loc1",startDate:new Date(2015,7,17,9),endDate:new Date(2015,7,17,17),options:{class:"vip-only"}});expect(a.addEvent("DIY Fireworks","loc1",new Date(2015,7,17,10,30),new Date(2015,7,17,
11,15),b).events[2]).to.deep.equal({name:"DIY Fireworks",location:"loc1",startDate:new Date(2015,7,17,10,30),endDate:new Date(2015,7,17,11,15),options:{url:"#"}});expect(a.addEvent("Afterparty","loc2",new Date(2015,7,17,22,30),new Date(2015,7,17,23,15),{url:"#",class:"vip-only"}).events[3]).to.deep.equal({name:"Afterparty",location:"loc2",startDate:new Date(2015,7,17,22,30),endDate:new Date(2015,7,17,23,15),options:{url:"#",class:"vip-only"}});expect(a.addEvent("DIY Fireworks","loc5",new Date(2015,
7,17,20,30),new Date(2015,7,18,0,15)).events[4]).to.deep.equal({name:"DIY Fireworks",location:"loc5",startDate:new Date(2015,7,17,20,30),endDate:new Date(2015,7,18,0,15),options:void 0});expect(a.addEvent("City Tour","loc1",new Date(2015,7,17,20,30),new Date(2015,7,18,0,15),"some string").events[5]).to.deep.equal({name:"City Tour",location:"loc1",startDate:new Date(2015,7,17,20,30),endDate:new Date(2015,7,18,0,15),options:void 0});expect(a.addEvent("Pub Crawl","loc1",new Date(2015,7,17,21,30),new Date(2015,
7,18,2,0),[]).events[6]).to.deep.equal({name:"Pub Crawl",location:"loc1",startDate:new Date(2015,7,17,21,30),endDate:new Date(2015,7,18,2,0),options:void 0});expect(a.addEvent("Pub Crawl","loc1",new Date(2015,7,17,21,30),new Date(2015,7,18,2,0),{url:"#",data:{maxPlayers:"12",gameType:"Muskets"}}).events[7]).to.deep.equal({name:"Pub Crawl",location:"loc1",startDate:new Date(2015,7,17,21,30),endDate:new Date(2015,7,18,2,0),options:{url:"#",data:{maxPlayers:"12",gameType:"Muskets"}}});expect(function(){a.addEvent("DIY Fireworks",
"Area 51",new Date(2015,7,17,10),new Date(2015,7,17,11),b)}).to.throw("Unknown location");expect(function(){a.addEvent("DIY Fireworks","loc2",new Date(2015,7,17,10,1),new Date(2015,7,17,10),b)}).to.throw("Invalid time range");expect(function(){a.addEvent("DIY Fireworks","loc2",new Date(2015,7,17,10),new Date(2015,7,17,9),b)}).to.throw("Invalid time range")})})})();
